function spheremodels = getSphereModelsRadius(sphere_pcs, pc, showClouds, radius)

% This functino takes the radius into account. It finds the point of the
% ball that is closest to the camera, and 
if nargin < 4
    radius = 0.0360;
end
num_balls = length(sphere_pcs);

for num = 1:num_balls
    mdl = pcfitsphere(sphere_pcs{num}, 0.001);
    ROI=sphere_pcs{num}.select(findNeighborsInRadius(sphere_pcs{num},mdl.Center, mdl.Radius*1.2));
    B=ROI.Location(ROI.Location(:,3)==min(ROI.Location(:,3)),:);
    center = mean(B,1);
    center(3) = center(3)+radius
    spheremodels{num} = sphereModel([center,radius]);
end
 
if showClouds
    pcshow(pc);
    hold on;
    for num = 1:num_balls
        plot(spheremodels{num});
        hold on;
    end
end


end
